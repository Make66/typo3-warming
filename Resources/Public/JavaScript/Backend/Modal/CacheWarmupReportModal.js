/*! For license information please see CacheWarmupReportModal.js.LICENSE.txt */
define("TYPO3/CMS/Warming/Backend/Modal/CacheWarmupReportModal",["jquery","TYPO3/CMS/Backend/ActionButton/ImmediateAction","TYPO3/CMS/Backend/Icons","TYPO3/CMS/Backend/Modal"],((e,t,n,a)=>(()=>{"use strict";var r={659:(e,t,n)=>{function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:()=>a})},730:(e,t,n)=>{function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.d(t,{Z:()=>r})},119:(e,t,n)=>{function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:()=>a})},513:(e,t,n)=>{function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);l=!0);}catch(e){i=!0,r=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,{Z:()=>r})},508:(e,t,n)=>{var a;n.d(t,{Z:()=>r}),function(e){e.check="actions-check",e.info="content-info",e.listAlternative="actions-list-alternative",e.refresh="actions-refresh",e.spinner="spinner-circle-light",e.viewPage="actions-view-page"}(a||(a={}));const r=a},981:e=>{e.exports=t},234:e=>{e.exports=n},140:e=>{e.exports=a},273:t=>{t.exports=e}},o={};function l(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e](n,n.exports,l),n.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{l.r(i),l.d(i,{default:()=>g});var e=l(513),t=l(659),n=l(730),a=l(119),r=l(508),o=l(273),s=l.n(o),c=l(981),u=l.n(c),d=l(234),p=l.n(d),f=l(140),h=l.n(f);const g=new(function(){function o(){(0,t.Z)(this,o),(0,a.Z)(this,"progress",void 0),(0,a.Z)(this,"panelCount",0)}return(0,n.Z)(o,[{key:"createModalAction",value:function(e){var t=this;return{label:TYPO3.lang["cacheWarmup.notification.action.showReport"],action:new(u())((function(){return t.createModal(e)}))}}},{key:"createModal",value:function(t){var n=this;this.progress=t,Promise.all([p().getIcon(r.Z.viewPage,p().sizes.small),p().getIcon(r.Z.info,p().sizes.small)]).then((function(t){var a=(0,e.Z)(t,2),r=a[0],o=a[1];h().dismiss(),n.panelCount=0;var l=n.buildModalContent(r,o);h().advanced({title:TYPO3.lang["cacheWarmup.modal.title"],content:l,size:h().sizes.large})}))}},{key:"createPanel",value:function(e,t,n,a){var r=this;return this.panelCount++,s()("<div>").addClass("panel panel-".concat(t," panel-table")).addClass((function(){return r.panelCount>1?"panel-space":""})).append(s()("<div>").addClass("panel-heading").text("".concat(e," (").concat(n.length,")")),s()("<div>").addClass("table-fit table-fit-wrap").append(s()("<table>").addClass("table table-striped table-hover").append(s()("<tbody>").append(n.map((function(e){return s()("<tr>").append(s()("<td>").addClass("col-title").text(e),s()("<td>").addClass("col-control").append(s()("<a>").attr("href",e).attr("target","_blank").addClass("btn btn-default btn-sm").html("".concat(a," ").concat(TYPO3.lang["cacheWarmup.modal.action.view"]))))}))))))}},{key:"buildModalContent",value:function(e,t){var n=s()("<div>");this.progress.getNumberOfFailedUrls()>0&&n.append(this.createPanel(TYPO3.lang["cacheWarmup.modal.panel.failed"],"danger",this.progress.urls.failed,e)),this.progress.getNumberOfSuccessfulUrls()>0&&n.append(this.createPanel(TYPO3.lang["cacheWarmup.modal.panel.successful"],"success",this.progress.urls.successful,e));var a=this.progress.progress.total>0?"".concat(TYPO3.lang["cacheWarmup.modal.total"]," ").concat(this.progress.progress.total):TYPO3.lang["cacheWarmup.modal.message.noUrlsCrawled"];return n.append(s()("<div>").addClass("badge badge-info").html("".concat(t," ").concat(a))),n}}]),o}())})(),i})()));
//# sourceMappingURL=CacheWarmupReportModal.js.map