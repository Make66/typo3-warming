{"version":3,"sources":["webpack:///../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///../node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///../node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack:///../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack:///../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///external \"TYPO3/CMS/Backend/ActionButton/ImmediateAction\"","webpack:///external \"TYPO3/CMS/Backend/Icons\"","webpack:///external \"TYPO3/CMS/Backend/Modal\"","webpack:///external \"jquery\"","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./Backend/Modal/CacheWarmupReportModal.ts"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_defineProperty","obj","value","_arrayLikeToArray","arr","len","arr2","Array","_slicedToArray","isArray","_i","Symbol","iterator","_s","_e","_arr","_n","_d","call","next","done","push","err","o","minLen","n","toString","slice","constructor","name","from","test","module","exports","__WEBPACK_EXTERNAL_MODULE__981__","__WEBPACK_EXTERNAL_MODULE__234__","__WEBPACK_EXTERNAL_MODULE__140__","__WEBPACK_EXTERNAL_MODULE__273__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","__esModule","d","a","definition","get","prop","hasOwnProperty","r","toStringTag","progress","label","TYPO3","lang","action","ImmediateAction","createModal","this","Promise","all","Icons","then","viewPageIcon","infoIcon","Modal","panelCount","$content","buildModalContent","title","content","size","state","urls","$","addClass","append","text","map","url","attr","html","getNumberOfFailedUrls","createPanel","failed","getNumberOfSuccessfulUrls","successful","totalText","total"],"mappings":"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","file":"Backend/Modal/CacheWarmupReportModal.js","sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","module.exports = __WEBPACK_EXTERNAL_MODULE__981__;","module.exports = __WEBPACK_EXTERNAL_MODULE__234__;","module.exports = __WEBPACK_EXTERNAL_MODULE__140__;","module.exports = __WEBPACK_EXTERNAL_MODULE__273__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Module: TYPO3/CMS/Warming/Backend/Modal/CacheWarmupReportModal\n */\nimport WarmupProgress from '../../../lib/WarmupProgress';\n\n// Modules\nimport $ from 'jquery';\nimport ImmediateAction from 'TYPO3/CMS/Backend/ActionButton/ImmediateAction';\nimport Icons from 'TYPO3/CMS/Backend/Icons';\nimport Modal from 'TYPO3/CMS/Backend/Modal';\n\nclass CacheWarmupReportModal {\n  private progress!: WarmupProgress;\n  private panelCount = 0;\n\n  public createModalAction(progress: WarmupProgress): { label: string, action: typeof ImmediateAction } {\n    return {\n      label: TYPO3.lang['cacheWarmup.notification.action.showReport'],\n      action: new ImmediateAction(() => this.createModal(progress)),\n    };\n  }\n\n  public createModal(progress: WarmupProgress): void {\n    this.progress = progress;\n\n    Promise.all<string, string>([\n      Icons.getIcon('actions-view-page', Icons.sizes.small),\n      Icons.getIcon('content-info', Icons.sizes.small),\n    ])\n      .then(([viewPageIcon, infoIcon]) => {\n        // Ensure all other modals are closed\n        Modal.dismiss();\n\n        // Reset count of panels in report\n        this.panelCount = 0;\n\n        // Build content\n        const $content = this.buildModalContent(viewPageIcon, infoIcon);\n\n        // Open modal with crawling report\n        Modal.advanced({\n          title: TYPO3.lang['cacheWarmup.modal.title'],\n          content: $content,\n          size: Modal.sizes.large,\n        });\n      });\n  }\n\n  private createPanel(title: string, state: string, urls: string[], viewPageIcon: string) {\n    this.panelCount++;\n\n    return $('<div>')\n      .addClass(`panel panel-${state} panel-table`)\n      .addClass((): string => {\n        if (this.panelCount > 1) {\n          return 'panel-space';\n        }\n        return '';\n      })\n      .append(\n        // Add panel header\n        $('<div>')\n          .addClass('panel-heading')\n          .text(`${title} (${urls.length})`),\n        // Add panel content\n        $('<div>')\n          .addClass('table-fit table-fit-wrap')\n          .append(\n            // Add table\n            $('<table>')\n              .addClass('table table-striped table-hover')\n              .append(\n                // Add table body\n                $('<tbody>').append(\n                  urls.map((url) => {\n                    // Add table row for each URL\n                    return $('<tr>').append(\n                      // Add URL as table cell\n                      $('<td>').addClass('col-title').text(url),\n                      // Add controls as table cell\n                      $('<td>').addClass('col-control').append(\n                        $('<a>')\n                          .attr('href', url)\n                          .attr('target', '_blank')\n                          .addClass('btn btn-default btn-sm')\n                          .html(`${viewPageIcon} ${TYPO3.lang['cacheWarmup.modal.action.view']}`)\n                      )\n                    ); // End: table row\n                  })\n                ) // End: table body\n              ) // End: table\n          ) // End: panel content\n      );\n  }\n\n  private buildModalContent(viewPageIcon: string, infoIcon: string): JQuery {\n    const $content = $('<div>');\n\n    // Build panels from crawled URLs and the appropriate crawling states\n    if (this.progress.getNumberOfFailedUrls() > 0) {\n      $content.append(\n        this.createPanel(\n          TYPO3.lang['cacheWarmup.modal.panel.failed'],\n          'danger',\n          this.progress.urls.failed,\n          viewPageIcon\n        )\n      );\n    }\n    if (this.progress.getNumberOfSuccessfulUrls() > 0) {\n      $content.append(\n        this.createPanel(\n          TYPO3.lang['cacheWarmup.modal.panel.successful'],\n          'success',\n          this.progress.urls.successful,\n          viewPageIcon\n        )\n      );\n    }\n\n    // Add number of totally crawled pages\n    const totalText = this.progress.progress.total > 0\n      ? `${TYPO3.lang['cacheWarmup.modal.total']} ${this.progress.progress.total}`\n      : TYPO3.lang['cacheWarmup.modal.message.noUrlsCrawled'];\n    $content.append(\n      $('<div>').addClass('badge badge-info').html(`${infoIcon} ${totalText}`)\n    );\n\n    return $content;\n  }\n}\n\nexport default new CacheWarmupReportModal();\n"],"sourceRoot":""}