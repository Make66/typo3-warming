/*! For license information please see CacheWarmupProgressModal.js.LICENSE.txt */
define("TYPO3/CMS/Warming/Backend/Modal/CacheWarmupProgressModal",["jquery","TYPO3/CMS/Backend/Modal"],((t,e)=>(()=>{"use strict";var r={659:(t,e,r)=>{function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.d(e,{Z:()=>a})},730:(t,e,r)=>{function a(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}r.d(e,{Z:()=>n})},119:(t,e,r)=>{function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,{Z:()=>a})},508:(t,e,r)=>{var a;r.d(e,{Z:()=>n}),function(t){t.check="actions-check",t.info="content-info",t.listAlternative="actions-list-alternative",t.refresh="actions-refresh",t.spinner="spinner-circle-light",t.viewPage="actions-view-page"}(a||(a={}));const n=a},140:t=>{t.exports=e},273:e=>{e.exports=t}},a={};function n(t){var e=a[t];if(void 0!==e)return e.exports;var o=a[t]={exports:{}};return r[t](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};return(()=>{n.r(o),n.d(o,{default:()=>c});var t,e=n(659),r=n(730),a=n(119),i=n(508),s=n(273),l=n.n(s),d=n(140),u=n.n(d);!function(t){t.reportButton="tx-warming-open-report",t.retryButton="tx-warming-retry"}(t||(t={}));const c=new(function(){function n(){(0,e.Z)(this,n),(0,a.Z)(this,"$modal",void 0),(0,a.Z)(this,"$progressBar",void 0),(0,a.Z)(this,"$allCounter",void 0),(0,a.Z)(this,"$failedCounter",void 0)}return(0,r.Z)(n,[{key:"createModal",value:function(){var t=this.buildInitialModalContent();u().currentModal?(this.$modal=u().currentModal,this.$modal.show(),this.$modal.find(".modal-body").empty().append(t)):this.$modal=this.createModalWithContent(t),this.$modal.find(".modal-footer").hide()}},{key:"updateProgress",value:function(t){var e=t.getProgressInPercent(),r=t.getNumberOfFailedUrls(),a=t.progress,n=a.current,o=a.total;this.$progressBar.attr("aria-valuenow",n),this.$progressBar.attr("aria-valuemax",o),this.$progressBar.css("width","".concat(e,"%")),this.$progressBar.html("".concat(e.toFixed(2),"%")),r>0&&(this.$progressBar.addClass("progress-bar-warning"),this.$failedCounter.show().html("Failed: ".concat(r))),this.$allCounter.html("Processed: <strong>".concat(n,"</strong><br>Total: <strong>").concat(o,"</strong>")),t.isFinished()&&this.$progressBar.removeClass("progress-bar-warning").addClass(r>0?"progress-bar-danger":"progress-bar-success")}},{key:"getModal",value:function(){return this.$modal}},{key:"getReportButton",value:function(){return this.$modal.find("button[name=".concat(t.reportButton,"]"))}},{key:"getRetryButton",value:function(){return this.$modal.find("button[name=".concat(t.retryButton,"]"))}},{key:"dismiss",value:function(){u().dismiss()}},{key:"buildInitialModalContent",value:function(){var t=l()("<div>");return this.$progressBar=l()('<div class="progress-bar progress-bar-striped">').attr("role","progressbar").attr("aria-valuemin",0).attr("aria-valuemax",0).attr("aria-valuenow",0),this.$allCounter=l()("<div>").html("Crawling sitemaps..."),this.$failedCounter=l()('<div class="badge badge-danger">'),this.$failedCounter.hide(),t.append(l()('<div class="tx-warming-progress progress">').append(this.$progressBar)).append(l()('<div class="tx-warming-counter">').append(this.$allCounter,this.$failedCounter)),t}},{key:"createModalWithContent",value:function(e){return u().advanced({title:TYPO3.lang["cacheWarmup.modal.title"],content:e,size:u().sizes.small,buttons:[{text:"Show report",icon:i.Z.listAlternative,btnClass:"btn-primary hidden",name:t.reportButton},{text:"Run again",icon:i.Z.refresh,btnClass:"btn-default hidden",name:t.retryButton},{text:"Close",btnClass:"btn-default",trigger:function(){return u().dismiss()}}]})}}]),n}())})(),o})()));
//# sourceMappingURL=CacheWarmupProgressModal.js.map