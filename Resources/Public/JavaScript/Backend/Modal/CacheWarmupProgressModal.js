define("TYPO3/CMS/Warming/Backend/Modal/CacheWarmupProgressModal",["jquery","TYPO3/CMS/Backend/Modal"],((e,t)=>(()=>{"use strict";var r={659:(e,t,r)=>{function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,{Z:()=>a})},730:(e,t,r)=>{function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}r.d(t,{Z:()=>n})},119:(e,t,r)=>{function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:()=>a})},140:e=>{e.exports=t},273:t=>{t.exports=e}},a={};function n(e){var t=a[e];if(void 0!==t)return t.exports;var o=a[e]={exports:{}};return r[e](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{n.r(o),n.d(o,{default:()=>d});var e=n(659),t=n(730),r=n(119),a=n(273),s=n.n(a),i=n(140),l=n.n(i);const d=new(function(){function a(){(0,e.Z)(this,a),(0,r.Z)(this,"$modal",void 0),(0,r.Z)(this,"$progressBar",void 0),(0,r.Z)(this,"$allCounter",void 0),(0,r.Z)(this,"$failedCounter",void 0)}return(0,t.Z)(a,[{key:"createModal",value:function(){var e=this.buildInitialModalContent();l().currentModal?(this.$modal=l().currentModal,this.$modal.show(),this.$modal.find(".modal-body").empty().append(e)):this.$modal=this.createModalWithContent(e),this.$modal.find(".modal-footer").hide()}},{key:"updateProgress",value:function(e){var t=e.getProgressInPercent(),r=e.getNumberOfFailedUrls(),a=e.progress,n=a.current,o=a.total;this.$progressBar.attr("aria-valuenow",n),this.$progressBar.attr("aria-valuemax",o),this.$progressBar.css("width","".concat(t,"%")),this.$progressBar.html("".concat(t.toFixed(2),"%")),r>0&&(this.$progressBar.addClass("progress-bar-warning"),this.$failedCounter.show().html("Failed: ".concat(r))),this.$allCounter.html("Processed: <strong>".concat(n,"</strong><br>Total: <strong>").concat(o,"</strong>")),n>=o&&this.$progressBar.removeClass("progress-bar-warning").addClass(r>0?"progress-bar-danger":"progress-bar-success")}},{key:"getModal",value:function(){return this.$modal}},{key:"getReportButton",value:function(){return this.$modal.find("button[name=tx-warming-open-report]")}},{key:"getRetryButton",value:function(){return this.$modal.find("button[name=tx-warming-retry]")}},{key:"dismiss",value:function(){l().dismiss()}},{key:"buildInitialModalContent",value:function(){var e=s()("<div>");return this.$progressBar=s()('<div class="progress-bar progress-bar-striped">').attr("role","progressbar").attr("aria-valuemin",0).attr("aria-valuemax",0).attr("aria-valuenow",0),this.$allCounter=s()("<div>").html("Crawling sitemaps..."),this.$failedCounter=s()('<div class="badge badge-danger">'),this.$failedCounter.hide(),e.append(s()('<div class="tx-warming-progress progress">').append(this.$progressBar)).append(s()('<div class="tx-warming-counter">').append(this.$allCounter,this.$failedCounter)),e}},{key:"createModalWithContent",value:function(e){return l().advanced({title:TYPO3.lang["cacheWarmup.modal.title"],content:e,size:l().sizes.small,buttons:[{text:"Show report",icon:"actions-list-alternative",btnClass:"btn-primary",name:"tx-warming-open-report"},{text:"Run again",icon:"actions-refresh",btnClass:"btn-default",name:"tx-warming-retry"},{text:"Close",btnClass:"btn-default",trigger:function(){l().dismiss()}}]})}}]),a}())})(),o})()));
//# sourceMappingURL=CacheWarmupProgressModal.js.map