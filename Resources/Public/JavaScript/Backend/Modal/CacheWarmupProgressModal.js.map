{"version":3,"sources":["webpack:///../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///../node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///../node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack:///../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack:///../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///../lib/Enums/IconIdentifiers.ts","webpack:///../lib/Enums/LanguageKeys.ts","webpack:///../lib/Util.ts","webpack:///external \"TYPO3/CMS/Backend/Modal\"","webpack:///external \"jquery\"","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./Backend/Modal/CacheWarmupProgressModal.ts"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_defineProperty","obj","value","_arrayLikeToArray","arr","len","arr2","Array","_slicedToArray","isArray","_i","Symbol","iterator","_s","_e","_arr","_n","_d","call","next","done","push","err","o","minLen","n","toString","slice","constructor","name","from","test","IconIdentifiers","LanguageKeys","Util","url","queryParams","entries","searchParams","append","format","values","reduce","p","c","index","replace","RegExp","module","exports","__WEBPACK_EXTERNAL_MODULE__140__","__WEBPACK_EXTERNAL_MODULE__273__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","__esModule","d","a","definition","get","prop","hasOwnProperty","r","toStringTag","CacheWarmupProgressModalButtonNames","$content","this","buildInitialModalContent","Modal","$modal","show","find","empty","createModalWithContent","hide","progress","percent","getProgressInPercent","failedCount","getNumberOfFailedUrls","current","total","$progressBar","addClass","attr","css","html","toFixed","$failedCounter","TYPO3","lang","$allCounter","isFinished","removeClass","reportButton","retryButton","$","title","content","size","buttons","text","icon","btnClass","trigger"],"mappings":"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","file":"Backend/Modal/CacheWarmupProgressModal.js","sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","'use strict'\n\n/*\n * This file is part of the TYPO3 CMS extension \"warming\".\n *\n * Copyright (C) 2021 Elias Häußler <elias@haeussler.dev>\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 2 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see <https://www.gnu.org/licenses/>.\n */\n\n/**\n * Identifiers of several used TYPO3 icons.\n *\n * @author Elias Häußler <elias@haeussler.dev>\n * @license GPL-2.0-or-later\n */\nenum IconIdentifiers {\n  check = 'actions-check',\n  info = 'content-info',\n  listAlternative = 'actions-list-alternative',\n  refresh = 'actions-refresh',\n  spinner = 'spinner-circle-light',\n  viewPage = 'actions-view-page',\n}\n\nexport default IconIdentifiers;\n","'use strict'\n\n/*\n * This file is part of the TYPO3 CMS extension \"warming\".\n *\n * Copyright (C) 2021 Elias Häußler <elias@haeussler.dev>\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 2 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see <https://www.gnu.org/licenses/>.\n */\n\n/**\n * Several language keys that are used in custom modules.\n *\n * @author Elias Häußler <elias@haeussler.dev>\n * @license GPL-2.0-or-later\n */\nenum LanguageKeys {\n  // Toolbar\n  toolbarSitemapMissing = 'cacheWarmup.toolbar.sitemap.missing',\n  toolbarSitemapPlaceholder = 'cacheWarmup.toolbar.sitemap.placeholder',\n  toolbarCopySuccessful = 'cacheWarmup.toolbar.copy.successful',\n\n  // Notification\n  notificationShowReport = 'cacheWarmup.notification.action.showReport',\n  notificationErrorTitle = 'cacheWarmup.notification.error.title',\n  notificationErrorMessage = 'cacheWarmup.notification.error.message',\n\n  // Report Modal\n  modalReportTitle = 'cacheWarmup.modal.report.title',\n  modalReportPanelFailed = 'cacheWarmup.modal.report.panel.failed',\n  modalReportPanelSuccessful = 'cacheWarmup.modal.report.panel.successful',\n  modalReportActionView = 'cacheWarmup.modal.report.action.view',\n  modalReportTotal = 'cacheWarmup.modal.report.message.total',\n  modalReportNoUrlsCrawled = 'cacheWarmup.modal.report.message.noUrlsCrawled',\n\n  // Progress Modal\n  modalProgressTitle = 'cacheWarmup.modal.progress.title',\n  modalProgressButtonReport = 'cacheWarmup.modal.progress.button.report',\n  modalProgressButtonRetry = 'cacheWarmup.modal.progress.button.retry',\n  modalProgressButtonClose = 'cacheWarmup.modal.progress.button.close',\n  modalProgressFailedCounter = 'cacheWarmup.modal.progress.failedCounter',\n  modalProgressAllCounter = 'cacheWarmup.modal.progress.allCounter',\n  modalProgressPlaceholder = 'cacheWarmup.modal.progress.placeholder',\n}\n\nexport default LanguageKeys;\n","'use strict'\n\n/*\n * This file is part of the TYPO3 CMS extension \"warming\".\n *\n * Copyright (C) 2021 Elias Häußler <elias@haeussler.dev>\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 2 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see <https://www.gnu.org/licenses/>.\n */\n\n/**\n * Collection of utility functions.\n *\n * @author Elias Häußler <elias@haeussler.dev>\n * @license GPL-2.0-or-later\n */\nexport default class Util {\n  /**\n   * Append given query parameters to query parameters of given URL.\n   *\n   * @param url {URL} URL whose query params should be extended\n   * @param queryParams {URLSearchParams} Collection of query parameters to be appended to the given URL\n   * @returns {URL} The modified URL\n   */\n  public static mergeUrlWithQueryParams(url: URL, queryParams: URLSearchParams): URL {\n    for (const [name, value] of queryParams.entries()) {\n      url.searchParams.append(name, value);\n    }\n\n    return url;\n  }\n\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n  /**\n   * Get formatted string.\n   *\n   * Formats the given string with given values and returns the formatted string.\n   *\n   * @param format {string} String to be formatted with given values\n   * @param values Values to be used as replacements in formatted string\n   * @returns {string} Formatted string\n   * @see https://stackoverflow.com/a/31007976\n   */\n  public static formatString(format: string, ...values: any[]): string {\n    return values.reduce((p: string, c: any, index: number): string => p.replace(new RegExp(`\\\\{${index}}`), c), format);\n  }\n  /* eslint-enable @typescript-eslint/no-explicit-any */\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__140__;","module.exports = __WEBPACK_EXTERNAL_MODULE__273__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","'use strict'\n\n/*\n * This file is part of the TYPO3 CMS extension \"warming\".\n *\n * Copyright (C) 2021 Elias Häußler <elias@haeussler.dev>\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 2 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program. If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport IconIdentifiers from '../../../lib/Enums/IconIdentifiers';\nimport LanguageKeys from '../../../lib/Enums/LanguageKeys';\nimport Util from '../../../lib/Util';\nimport WarmupProgress from '../../../lib/WarmupProgress';\n\n// Modules\nimport $ from 'jquery';\nimport Modal from 'TYPO3/CMS/Backend/Modal';\n\n/**\n * Button names within cache warmup progress modal.\n *\n * @author Elias Häußler <elias@haeussler.dev>\n * @license GPL-2.0-or-later\n */\nenum CacheWarmupProgressModalButtonNames {\n  reportButton = 'tx-warming-open-report',\n  retryButton = 'tx-warming-retry',\n}\n\n/**\n * AMD module that shows a modal with the progress of the current cache warmup.\n *\n * Module: TYPO3/CMS/Warming/Backend/Modal/CacheWarmupProgressModal\n *\n * @author Elias Häußler <elias@haeussler.dev>\n * @license GPL-2.0-or-later\n */\nclass CacheWarmupProgressModal {\n  private $modal!: JQuery;\n  private $progressBar!: JQuery;\n  private $allCounter!: JQuery;\n  private $failedCounter!: JQuery;\n\n  /**\n   * Create modal with progress bar.\n   *\n   * Re-initializes the current modal or creates a new modal and applies initial\n   * content. The modal contains a progress bar as well as counters of currently\n   * processed pages, total number of pages to be crawled as well as number of\n   * failed crawls.\n   *\n   * Next to the modal content, a footer with several buttons is added. The footer\n   * is hidden as long as cache warmup is in progress since it contains several\n   * actions that require cache warmup to be finished.\n   */\n  public createModal(): void {\n    const $content = this.buildInitialModalContent();\n\n    // Build initial modal or apply content to existing modal\n    if (Modal.currentModal) {\n      this.$modal = Modal.currentModal;\n      this.$modal.show();\n      this.$modal.find('.modal-body').empty().append($content);\n    } else {\n      this.$modal = this.createModalWithContent($content);\n    }\n\n    // Hide footer until cache warmup is finished\n    this.$modal.find('.modal-footer').hide();\n  }\n\n  /**\n   * Update progress bar and counters in modal content.\n   *\n   * Reads data from the given {@link WarmupProgress} object and applies its data\n   * to the single components within the modal content (progress bar and counters).\n   *\n   * @param progress {WarmupProgress} An object holding data about the progress of the current cache warmup\n   */\n  public updateProgress(progress: WarmupProgress): void {\n    const percent = progress.getProgressInPercent();\n    const failedCount = progress.getNumberOfFailedUrls();\n    const {current, total} = progress.progress;\n\n    this.$progressBar.addClass('active');\n    this.$progressBar.attr('aria-valuenow', current);\n    this.$progressBar.attr('aria-valuemax', total);\n    this.$progressBar.css('width', `${percent}%`);\n    this.$progressBar.html(`${percent.toFixed(2)}%`);\n\n    if (failedCount > 0) {\n      this.$progressBar.addClass('progress-bar-warning');\n      this.$failedCounter.show().html(\n        Util.formatString(TYPO3.lang[LanguageKeys.modalProgressFailedCounter], failedCount.toString())\n      );\n    }\n\n    this.$allCounter.html(\n      Util.formatString(TYPO3.lang[LanguageKeys.modalProgressAllCounter], current.toString(), total.toString())\n    );\n\n    if (progress.isFinished()) {\n      this.$progressBar\n        .removeClass('active')\n        .removeClass('progress-bar-warning')\n        .addClass(failedCount > 0 ? 'progress-bar-danger' : 'progress-bar-success');\n    }\n  }\n\n  /**\n   * Get current modal as {@link JQuery} object.\n   *\n   * @returns {JQuery} Current modal as {@link JQuery} object\n   */\n  public getModal(): JQuery {\n    return this.$modal;\n  }\n\n  /**\n   * Get report button within current modal as {@link JQuery} object.\n   *\n   * @returns {JQuery} Report button within current modal as {@link JQuery} object\n   */\n  public getReportButton(): JQuery {\n    return this.$modal.find(`button[name=${CacheWarmupProgressModalButtonNames.reportButton}]`);\n  }\n\n  /**\n   * Get retry button within current modal as {@link JQuery} object.\n   *\n   * @returns {JQuery} Retry button within current modal as {@link JQuery} object\n   */\n  public getRetryButton(): JQuery {\n    return this.$modal.find(`button[name=${CacheWarmupProgressModalButtonNames.retryButton}]`);\n  }\n\n  /**\n   * Dismiss current modal.\n   */\n  public dismiss(): void {\n    Modal.dismiss();\n  }\n\n  /**\n   * Build initial modal content and return its wrapper.\n   *\n   * Creates a progress bar and several counters and wraps them in a <div>\n   * container. The container is then returned as {@link JQuery} object.\n   *\n   * @returns {JQuery} Modal content as {@link JQuery} object\n   * @private\n   */\n  private buildInitialModalContent(): JQuery {\n    const $content = $('<div>');\n\n    this.$progressBar = $('<div class=\"progress-bar progress-bar-striped\">')\n      .attr('role', 'progressbar')\n      .attr('aria-valuemin', 0)\n      .attr('aria-valuemax', 0)\n      .attr('aria-valuenow', 0);\n    this.$allCounter = $('<div>').html(TYPO3.lang[LanguageKeys.modalProgressPlaceholder]);\n    this.$failedCounter = $('<div class=\"badge badge-danger\">');\n\n    // Hide failed counter until any URL fails to be warmed up\n    this.$failedCounter.hide();\n\n    // Append progress bar and counter\n    $content\n      .append($('<div class=\"tx-warming-progress progress\">').append(this.$progressBar))\n      .append($('<div class=\"tx-warming-counter\">').append(this.$allCounter, this.$failedCounter));\n\n    return $content;\n  }\n\n  /**\n   * Create new modal and apply given content to the modal body.\n   *\n   * @param $content {JQuery} Content to be applied to the modal body\n   * @returns {JQuery} The new modal as {@link JQuery} object\n   * @private\n   */\n  private createModalWithContent($content: JQuery): JQuery {\n    return Modal.advanced({\n      title: TYPO3.lang[LanguageKeys.modalProgressTitle],\n      content: $content,\n      size: Modal.sizes.small,\n      buttons: [\n        {\n          text: TYPO3.lang[LanguageKeys.modalProgressButtonReport],\n          icon: IconIdentifiers.listAlternative,\n          // Trigger is defined by external module, button is hidden in the meantime\n          btnClass: 'btn-primary hidden',\n          name: CacheWarmupProgressModalButtonNames.reportButton,\n        },\n        {\n          text: TYPO3.lang[LanguageKeys.modalProgressButtonRetry],\n          icon: IconIdentifiers.refresh,\n          // Trigger is defined by external module, button is hidden in the meantime\n          btnClass: 'btn-default hidden',\n          name: CacheWarmupProgressModalButtonNames.retryButton,\n        },\n        {\n          text: TYPO3.lang[LanguageKeys.modalProgressButtonClose],\n          btnClass: 'btn-default',\n          trigger: (): void => Modal.dismiss(),\n        },\n      ]\n    });\n  }\n}\n\nexport default new CacheWarmupProgressModal();\n"],"sourceRoot":""}